{"version":3,"file":"weather-widget.css","mappings":"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","sources":["webpack://WeatherWidget/./src/styles/main.css","webpack://WeatherWidget/./src/components/ErrorBoundary.vue","webpack://WeatherWidget/./src/components/WeatherCard.vue","webpack://WeatherWidget/./src/components/DisplayMode.vue","webpack://WeatherWidget/./src/components/SettingsMode.vue","webpack://WeatherWidget/./src/components/WeatherWidget.vue"],"sourcesContent":["@tailwind base;\r\n@tailwind components;\r\n@tailwind utilities;\r\n\r\n* {\r\n  box-sizing: border-box;\r\n}\r\n\r\nbody {\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n}\r\n\r\nsvg {\r\n  display: inline-block;\r\n  vertical-align: middle;\r\n}\r\n\r\n/* Ensure SVG icons are visible */\r\nsvg[stroke=\"currentColor\"] {\r\n  stroke: currentColor;\r\n}\r\n\r\nsvg[fill=\"currentColor\"] {\r\n  fill: currentColor;\r\n}\r\n\r\n/* Default color for SVG if not specified */\r\nsvg:not([fill]):not([stroke]) {\r\n  color: inherit;\r\n}\r\n\r\n/* Custom animations */\r\n@keyframes slideUp {\r\n  from {\r\n    opacity: 0;\r\n    transform: translateX(-50%) translateY(20px);\r\n  }\r\n  to {\r\n    opacity: 1;\r\n    transform: translateX(-50%) translateY(0);\r\n  }\r\n}\r\n\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n\r\n/* Custom component classes */\r\n@layer components {\r\n  .btn {\r\n    @apply px-6 py-3 rounded-lg font-medium cursor-pointer transition-all duration-300 border-none;\r\n  }\r\n  \r\n  .btn-primary {\r\n    @apply btn bg-primary text-white hover:bg-primary-dark hover:shadow-lg;\r\n  }\r\n  \r\n  .card {\r\n    @apply bg-white rounded-xl p-5 shadow-md transition-shadow duration-300 hover:shadow-lg;\r\n  }\r\n}","<template>\r\n  <div v-if=\"hasError\" class=\"error-boundary\">\r\n    <div class=\"error-boundary__content\">\r\n      <svg class=\"error-boundary__icon\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#e74c3c\" stroke-width=\"2\" style=\"width: 64px; height: 64px; display: block;\">\r\n        <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\r\n        <line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"12\"></line>\r\n        <line x1=\"12\" y1=\"16\" x2=\"12.01\" y2=\"16\"></line>\r\n      </svg>\r\n      \r\n      <h3 class=\"error-boundary__title\">Something went wrong</h3>\r\n      \r\n      <p class=\"error-boundary__message\">\r\n        {{ userFriendlyMessage }}\r\n      </p>\r\n      \r\n      <div class=\"error-boundary__actions\">\r\n        <button \r\n          class=\"error-boundary__btn error-boundary__btn--primary\"\r\n          @click=\"handleRetry\"\r\n        >\r\n          Try Again\r\n        </button>\r\n        \r\n        <button \r\n          class=\"error-boundary__btn error-boundary__btn--secondary\"\r\n          @click=\"handleReset\"\r\n        >\r\n          Reset Widget\r\n        </button>\r\n      </div>\r\n      \r\n      <details v-if=\"errorDetails\" class=\"error-boundary__details\">\r\n        <summary class=\"error-boundary__details-summary\">Technical Details</summary>\r\n        <pre class=\"error-boundary__details-content\">{{ errorDetails }}</pre>\r\n      </details>\r\n    </div>\r\n  </div>\r\n  \r\n  <slot v-else></slot>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, onErrorCaptured } from 'vue';\r\n\r\nconst emit = defineEmits<{\r\n  'error': [error: Error];\r\n  'retry': [];\r\n  'reset': [];\r\n}>();\r\n\r\n// State\r\nconst hasError = ref(false);\r\nconst errorMessage = ref('');\r\nconst errorDetails = ref('');\r\nconst userFriendlyMessage = ref('');\r\n\r\n/**\r\n * Capture errors from child components\r\n */\r\nonErrorCaptured((error: Error, instance, info) => {\r\n  console.error('Error boundary caught error:', error, info);\r\n  \r\n  hasError.value = true;\r\n  errorMessage.value = error.message;\r\n  errorDetails.value = `${error.name}: ${error.message}\\n\\nStack:\\n${error.stack || 'No stack trace available'}\\n\\nComponent Info: ${info}`;\r\n  \r\n  // Generate user-friendly message based on error type\r\n  userFriendlyMessage.value = getUserFriendlyMessage(error);\r\n  \r\n  // Emit error event\r\n  emit('error', error);\r\n  \r\n  // Prevent error from propagating further\r\n  return false;\r\n});\r\n\r\n/**\r\n * Generate user-friendly error message\r\n */\r\nfunction getUserFriendlyMessage(error: Error): string {\r\n  const message = error.message.toLowerCase();\r\n  \r\n  if (message.includes('network') || message.includes('fetch')) {\r\n    return 'Unable to connect to the weather service. Please check your internet connection and try again.';\r\n  }\r\n  \r\n  if (message.includes('api') || message.includes('rate limit')) {\r\n    return 'The weather service is temporarily unavailable. Please try again in a few moments.';\r\n  }\r\n  \r\n  if (message.includes('storage') || message.includes('quota')) {\r\n    return 'Unable to save your settings. Your browser storage may be full.';\r\n  }\r\n  \r\n  if (message.includes('geolocation') || message.includes('permission')) {\r\n    return 'Unable to access your location. Please check your browser permissions.';\r\n  }\r\n  \r\n  return 'An unexpected error occurred. Please try refreshing the page.';\r\n}\r\n\r\n/**\r\n * Handle retry button click\r\n */\r\nfunction handleRetry(): void {\r\n  hasError.value = false;\r\n  errorMessage.value = '';\r\n  errorDetails.value = '';\r\n  userFriendlyMessage.value = '';\r\n  \r\n  emit('retry');\r\n}\r\n\r\n/**\r\n * Handle reset button click\r\n */\r\nfunction handleReset(): void {\r\n  hasError.value = false;\r\n  errorMessage.value = '';\r\n  errorDetails.value = '';\r\n  userFriendlyMessage.value = '';\r\n  \r\n  emit('reset');\r\n}\r\n\r\n/**\r\n * Expose methods for parent components\r\n */\r\ndefineExpose({\r\n  reset: handleReset,\r\n  hasError: () => hasError.value,\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.error-boundary {\r\n  @apply w-full min-h-[400px] flex items-center justify-center p-8 bg-gray-50;\r\n}\r\n\r\n.error-boundary__content {\r\n  @apply max-w-[500px] w-full bg-white rounded-xl p-8 shadow-lg text-center;\r\n}\r\n\r\n.error-boundary__icon {\r\n  @apply w-16 h-16 mx-auto mb-4;\r\n  color: #e74c3c !important;\r\n  stroke: #e74c3c !important;\r\n  fill: none !important;\r\n  display: block;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.error-boundary__title {\r\n  @apply text-2xl font-semibold text-secondary m-0 mb-4;\r\n}\r\n\r\n.error-boundary__message {\r\n  @apply text-base text-gray-600 leading-relaxed m-0 mb-8;\r\n}\r\n\r\n.error-boundary__actions {\r\n  @apply flex gap-3 justify-center mb-6;\r\n}\r\n\r\n.error-boundary__btn {\r\n  @apply px-6 py-3 border-none rounded-lg text-base font-medium cursor-pointer transition-all duration-300;\r\n}\r\n\r\n.error-boundary__btn--primary {\r\n  @apply bg-primary text-white hover:bg-primary-dark hover:-translate-y-0.5 hover:shadow-[0_4px_12px_rgba(52,152,219,0.3)];\r\n}\r\n\r\n.error-boundary__btn--secondary {\r\n  @apply bg-gray-200 text-secondary hover:bg-gray-400;\r\n}\r\n\r\n.error-boundary__details {\r\n  @apply text-left mt-4 p-4 bg-gray-100 rounded-lg border border-gray-300;\r\n}\r\n\r\n.error-boundary__details-summary {\r\n  @apply cursor-pointer font-medium text-gray-600 select-none hover:text-primary;\r\n}\r\n\r\n.error-boundary__details-content {\r\n  @apply mt-2 p-2 bg-white rounded text-xs text-gray-700 overflow-x-auto whitespace-pre-wrap break-words;\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .error-boundary {\r\n    @apply p-4;\r\n  }\r\n\r\n  .error-boundary__content {\r\n    @apply p-6;\r\n  }\r\n\r\n  .error-boundary__title {\r\n    @apply text-xl;\r\n  }\r\n\r\n  .error-boundary__message {\r\n    @apply text-sm;\r\n  }\r\n\r\n  .error-boundary__actions {\r\n    @apply flex-col;\r\n  }\r\n\r\n  .error-boundary__btn {\r\n    @apply w-full;\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"weather-card\">\r\n    <div v-if=\"isLoading\" class=\"weather-card__loading\">\r\n      <div class=\"spinner\"></div>\r\n      <p>Loading weather data...</p>\r\n    </div>\r\n    \r\n    <div v-else class=\"weather-card__content\">\r\n      <!-- City Header -->\r\n      <div class=\"weather-card__header\">\r\n        <h3 class=\"weather-card__city\">{{ city.name }}, {{ city.country }}</h3>\r\n      </div>\r\n\r\n      <!-- Main Weather Info -->\r\n      <div class=\"weather-card__main\">\r\n        <div class=\"weather-card__icon-section\">\r\n          <!-- Icon Loading Placeholder -->\r\n          <div v-if=\"iconLoading\" class=\"weather-card__icon-placeholder\">\r\n            <div class=\"weather-card__icon-spinner\"></div>\r\n          </div>\r\n          \r\n          <!-- Weather Icon -->\r\n          <img \r\n            ref=\"iconElement\"\r\n            v-show=\"!iconLoading && !iconError\"\r\n            :src=\"weatherIconUrl\" \r\n            :alt=\"weather.description\"\r\n            class=\"weather-card__icon\"\r\n            @load=\"handleIconLoad\"\r\n            @error=\"handleIconError\"\r\n          />\r\n          \r\n          <!-- Fallback Icon/Text -->\r\n          <div v-if=\"iconError\" class=\"weather-card__icon-fallback\">\r\n            <svg \r\n              class=\"weather-card__fallback-icon\"\r\n              viewBox=\"0 0 24 24\" \r\n              fill=\"none\" \r\n              stroke=\"#9ca3af\" \r\n              stroke-width=\"2\"\r\n              style=\"width: 64px; height: 64px; display: block;\"\r\n            >\r\n              <path d=\"M12 2L2 7l10 5 10-5-10-5z\"></path>\r\n              <path d=\"M2 17l10 5 10-5\"></path>\r\n              <path d=\"M2 12l10 5 10-5\"></path>\r\n            </svg>\r\n          </div>\r\n          \r\n          <p class=\"weather-card__description\">{{ weather.description || 'Weather' }}</p>\r\n        </div>\r\n        \r\n        <div class=\"weather-card__temperature\">\r\n          <span class=\"weather-card__temp-main\">{{ Math.round(weather.temperature) }}°C</span>\r\n          <span class=\"weather-card__temp-feels\">Feels like {{ Math.round(weather.feelsLike) }}°C</span>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Weather Details Grid -->\r\n      <div class=\"weather-card__details\">\r\n        <div class=\"weather-card__detail-item\">\r\n          <span class=\"weather-card__detail-label\">Wind</span>\r\n          <span class=\"weather-card__detail-value\">{{ weather.wind.speed }} m/s {{ weather.wind.direction }}</span>\r\n        </div>\r\n        \r\n        <div class=\"weather-card__detail-item\">\r\n          <span class=\"weather-card__detail-label\">Pressure</span>\r\n          <span class=\"weather-card__detail-value\">{{ weather.pressure }} hPa</span>\r\n        </div>\r\n        \r\n        <div class=\"weather-card__detail-item\">\r\n          <span class=\"weather-card__detail-label\">Humidity</span>\r\n          <span class=\"weather-card__detail-value\">{{ weather.humidity }}%</span>\r\n        </div>\r\n        \r\n        <div class=\"weather-card__detail-item\">\r\n          <span class=\"weather-card__detail-label\">Dew Point</span>\r\n          <span class=\"weather-card__detail-value\">{{ Math.round(weather.dewPoint) }}°C</span>\r\n        </div>\r\n        \r\n        <div class=\"weather-card__detail-item\">\r\n          <span class=\"weather-card__detail-label\">Visibility</span>\r\n          <span class=\"weather-card__detail-value\">{{ weather.visibility }} km</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { computed, ref, watch, onMounted, nextTick } from 'vue';\r\nimport type { WeatherCardProps } from '../types/props';\r\n\r\nconst props = defineProps<WeatherCardProps>();\r\n\r\nconst iconLoading = ref(true);\r\nconst iconError = ref(false);\r\nconst iconElement = ref<HTMLImageElement | null>(null);\r\n\r\nconst weatherIconUrl = computed(() => {\r\n  const iconCode = props.weather.icon || '01d';\r\n  return `https://openweathermap.org/img/wn/${iconCode}@4x.png`;\r\n});\r\n\r\n/**\r\n * Handle successful icon load\r\n */\r\nfunction handleIconLoad(): void {\r\n  iconLoading.value = false;\r\n  iconError.value = false;\r\n}\r\n\r\n/**\r\n * Handle icon load error\r\n */\r\nfunction handleIconError(): void {\r\n  iconLoading.value = false;\r\n  iconError.value = true;\r\n}\r\n\r\n/**\r\n * Check if image is already loaded (cached)\r\n */\r\nfunction checkImageLoaded(): void {\r\n  nextTick(() => {\r\n    if (iconElement.value) {\r\n      if (iconElement.value.complete && iconElement.value.naturalHeight !== 0) {\r\n        handleIconLoad();\r\n      } else if (iconElement.value.complete && iconElement.value.naturalHeight === 0) {\r\n        // Image failed to load\r\n        handleIconError();\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\n// Reset loading state when weather data changes\r\nwatch(() => props.weather.icon, () => {\r\n  iconLoading.value = true;\r\n  iconError.value = false;\r\n  // Use setTimeout to ensure the DOM has updated\r\n  setTimeout(() => {\r\n    checkImageLoaded();\r\n  }, 0);\r\n});\r\n\r\n// Check on mount if image is already loaded\r\nonMounted(() => {\r\n  // Delay check to ensure ref is set\r\n  setTimeout(() => {\r\n    checkImageLoaded();\r\n  }, 0);\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.weather-card {\r\n  background: #ffffff;\r\n  border-radius: 0.75rem;\r\n  padding: 1.25rem;\r\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06);\r\n  transition: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);\r\n  border: none;\r\n}\r\n\r\n.weather-card:hover {\r\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1), 0 2px 4px rgba(0, 0, 0, 0.06);\r\n  transform: translateY(-1px);\r\n}\r\n\r\n.weather-card__loading {\r\n  @apply flex flex-col items-center justify-center py-10 px-5 text-gray-600;\r\n}\r\n\r\n.weather-card__loading .spinner {\r\n  @apply w-10 h-10 border-4 border-gray-200 border-t-primary rounded-full mb-3;\r\n  animation: spin 1s linear infinite;\r\n}\r\n\r\n.weather-card__loading p {\r\n  @apply m-0 text-sm;\r\n}\r\n\r\n.weather-card__content {\r\n  @apply flex flex-col gap-4;\r\n}\r\n\r\n.weather-card__header {\r\n  border-bottom: 1px solid #e5e7eb;\r\n  padding-bottom: 0.875rem;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.weather-card__city {\r\n  margin: 0;\r\n  font-size: 1.5rem;\r\n  font-weight: 600;\r\n  color: #111827;\r\n  line-height: 1.2;\r\n  letter-spacing: -0.01em;\r\n}\r\n\r\n.weather-card__main {\r\n  @apply flex justify-between items-center gap-5;\r\n}\r\n\r\n.weather-card__icon-section {\r\n  @apply flex flex-col items-center gap-3;\r\n  @apply min-h-[120px] justify-center;\r\n}\r\n\r\n.weather-card__icon {\r\n  @apply w-24 h-24 object-contain;\r\n  animation: fadeIn 0.4s ease-in-out forwards;\r\n  display: block;\r\n}\r\n\r\n.weather-card__icon-placeholder {\r\n  @apply w-24 h-24 flex items-center justify-center;\r\n  @apply bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl;\r\n  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.06);\r\n}\r\n\r\n.weather-card__icon-spinner {\r\n  @apply w-12 h-12 border-4 border-gray-200 border-t-primary rounded-full;\r\n  animation: spin 1s linear infinite;\r\n}\r\n\r\n.weather-card__icon-fallback {\r\n  @apply w-24 h-24 flex items-center justify-center;\r\n  @apply bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl;\r\n  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.06);\r\n}\r\n\r\n.weather-card__fallback-icon {\r\n  @apply w-16 h-16;\r\n  color: #9ca3af !important;\r\n  stroke: #9ca3af !important;\r\n  fill: none !important;\r\n  display: block;\r\n  flex-shrink: 0;\r\n}\r\n\r\n@keyframes fadeIn {\r\n  from {\r\n    opacity: 0;\r\n    transform: scale(0.9);\r\n  }\r\n  to {\r\n    opacity: 1;\r\n    transform: scale(1);\r\n  }\r\n}\r\n\r\n.weather-card__description {\r\n  margin: 0;\r\n  font-size: 0.875rem;\r\n  font-weight: 500;\r\n  color: #6b7280;\r\n  text-transform: capitalize;\r\n  text-align: center;\r\n  margin-top: 0.5rem;\r\n}\r\n\r\n.weather-card__temperature {\r\n  @apply flex flex-col items-end gap-1;\r\n}\r\n\r\n.weather-card__temp-main {\r\n  font-size: 3rem;\r\n  font-weight: 700;\r\n  line-height: 1;\r\n  color: #111827;\r\n  letter-spacing: -0.02em;\r\n}\r\n\r\n.weather-card__temp-feels {\r\n  font-size: 0.875rem;\r\n  font-weight: 400;\r\n  color: #6b7280;\r\n  margin-top: 0.25rem;\r\n}\r\n\r\n.weather-card__details {\r\n  display: grid;\r\n  grid-template-columns: repeat(2, 1fr);\r\n  gap: 0.875rem;\r\n  padding-top: 1rem;\r\n  border-top: 1px solid #e5e7eb;\r\n  margin-top: 1rem;\r\n}\r\n\r\n.weather-card__detail-item {\r\n  @apply flex flex-col gap-1;\r\n}\r\n\r\n.weather-card__detail-label {\r\n  font-size: 0.75rem;\r\n  font-weight: 500;\r\n  color: #9ca3af;\r\n  text-transform: uppercase;\r\n  letter-spacing: 0.05em;\r\n  margin-bottom: 0.25rem;\r\n}\r\n\r\n.weather-card__detail-value {\r\n  font-size: 0.9375rem;\r\n  font-weight: 600;\r\n  color: #111827;\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .weather-card {\r\n    padding: 1rem;\r\n  }\r\n\r\n  .weather-card__city {\r\n    font-size: 1.25rem;\r\n  }\r\n\r\n  .weather-card__main {\r\n    flex-direction: column;\r\n    align-items: center;\r\n  }\r\n\r\n  .weather-card__icon-section {\r\n    min-height: 100px;\r\n  }\r\n\r\n  .weather-card__icon,\r\n  .weather-card__icon-placeholder,\r\n  .weather-card__icon-fallback {\r\n    width: 5rem;\r\n    height: 5rem;\r\n  }\r\n\r\n  .weather-card__fallback-icon {\r\n    width: 3rem;\r\n    height: 3rem;\r\n  }\r\n\r\n  .weather-card__temperature {\r\n    align-items: center;\r\n  }\r\n\r\n  .weather-card__temp-main {\r\n    font-size: 2.5rem;\r\n  }\r\n\r\n  .weather-card__details {\r\n    grid-template-columns: 1fr;\r\n    gap: 0.75rem;\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"display-mode\">\r\n    <!-- Settings Button -->\r\n    <button \r\n      class=\"display-mode__settings-btn\"\r\n      @click=\"handleOpenSettings\"\r\n      aria-label=\"Open settings\"\r\n      title=\"Settings\"\r\n    >\r\n      <svg \r\n        class=\"display-mode__settings-icon\" \r\n        viewBox=\"0 0 24 24\" \r\n        fill=\"none\" \r\n        stroke=\"#4b5563\" \r\n        stroke-width=\"2\"\r\n        stroke-linecap=\"round\"\r\n        stroke-linejoin=\"round\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        width=\"18\"\r\n        height=\"18\"\r\n      >\r\n        <circle cx=\"12\" cy=\"12\" r=\"3\" stroke=\"#4b5563\" fill=\"none\"></circle>\r\n        <path d=\"M12 1v6M12 17v6M23 12h-6M7 12H1M19.07 4.93l-4.24 4.24M9.17 14.83l-4.24 4.24M19.07 19.07l-4.24-4.24M9.17 9.17L4.93 4.93\" stroke=\"#4b5563\" fill=\"none\" stroke-width=\"2\"></path>\r\n      </svg>\r\n    </button>\r\n\r\n    <!-- City List -->\r\n    <div class=\"display-mode__city-list\">\r\n      <WeatherCard\r\n        v-for=\"city in cities\"\r\n        :key=\"city.id\"\r\n        :city=\"city\"\r\n        :weather=\"weatherDataMap.get(city.id) || createEmptyWeatherData(city.id)\"\r\n        :is-loading=\"loadingStates.get(city.id) || false\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, onMounted, onUnmounted } from 'vue';\r\nimport WeatherCard from './WeatherCard.vue';\r\nimport { createWeatherService } from '../services/WeatherService';\r\nimport type { DisplayModeProps } from '../types/props';\r\nimport type { WeatherData } from '../types/models';\r\n\r\nconst props = defineProps<DisplayModeProps>();\r\n\r\nconst emit = defineEmits<{\r\n  'open-settings': [];\r\n}>();\r\n\r\n// State\r\nconst weatherDataMap = ref<Map<string, WeatherData>>(new Map());\r\nconst loadingStates = ref<Map<string, boolean>>(new Map());\r\nconst refreshIntervalId = ref<number | null>(null);\r\n\r\n// Initialize weather service with API key\r\nconst weatherService = createWeatherService(process.env.OPENWEATHER_API_KEY || '5ec582eefe33e199bc0245ff5a6aaa8e');\r\n\r\n/**\r\n * Create empty weather data for loading state\r\n */\r\nfunction createEmptyWeatherData(cityId: string): WeatherData {\r\n  return {\r\n    cityId,\r\n    temperature: 0,\r\n    feelsLike: 0,\r\n    description: '',\r\n    icon: '01d',\r\n    wind: {\r\n      speed: 0,\r\n      direction: 'N',\r\n      degrees: 0\r\n    },\r\n    pressure: 0,\r\n    humidity: 0,\r\n    dewPoint: 0,\r\n    visibility: 0,\r\n    fetchedAt: 0\r\n  };\r\n}\r\n\r\n/**\r\n * Fetch weather data for all cities\r\n */\r\nasync function fetchWeatherForAllCities(): Promise<void> {\r\n  for (const city of props.cities) {\r\n    // Set loading state\r\n    loadingStates.value.set(city.id, true);\r\n\r\n    try {\r\n      const weatherData = await weatherService.getWeatherByCity(city.name);\r\n      weatherDataMap.value.set(city.id, weatherData);\r\n    } catch (error) {\r\n      console.error(`Failed to fetch weather for ${city.name}:`, error);\r\n      // Keep loading state or show error - for now we'll just log\r\n    } finally {\r\n      loadingStates.value.set(city.id, false);\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Handle settings button click\r\n */\r\nfunction handleOpenSettings(): void {\r\n  emit('open-settings');\r\n}\r\n\r\n/**\r\n * Set up periodic refresh (every 10 minutes)\r\n */\r\nfunction setupPeriodicRefresh(): void {\r\n  // Refresh every 10 minutes (600,000 milliseconds)\r\n  refreshIntervalId.value = window.setInterval(() => {\r\n    fetchWeatherForAllCities();\r\n  }, 10 * 60 * 1000);\r\n}\r\n\r\n/**\r\n * Clean up interval on unmount\r\n */\r\nfunction cleanupPeriodicRefresh(): void {\r\n  if (refreshIntervalId.value !== null) {\r\n    clearInterval(refreshIntervalId.value);\r\n    refreshIntervalId.value = null;\r\n  }\r\n}\r\n\r\n// Lifecycle hooks\r\nonMounted(() => {\r\n  fetchWeatherForAllCities();\r\n  setupPeriodicRefresh();\r\n});\r\n\r\nonUnmounted(() => {\r\n  cleanupPeriodicRefresh();\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.display-mode {\r\n  position: relative;\r\n  width: 100%;\r\n  min-height: 400px;\r\n  padding: 1.25rem;\r\n  background: #f9fafb;\r\n}\r\n\r\n.display-mode__settings-btn {\r\n  position: absolute;\r\n  top: 1.25rem;\r\n  right: 1.25rem;\r\n  width: 2.25rem;\r\n  height: 2.25rem;\r\n  min-width: 2.25rem;\r\n  min-height: 2.25rem;\r\n  border: none;\r\n  background: #ffffff;\r\n  border-radius: 0.5rem;\r\n  cursor: pointer;\r\n  display: flex !important;\r\n  align-items: center;\r\n  justify-content: center;\r\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\r\n  transition: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);\r\n  z-index: 10;\r\n  padding: 0;\r\n  margin: 0;\r\n}\r\n\r\n.display-mode__settings-btn:hover {\r\n  background: #f3f4f6;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n  transform: rotate(90deg);\r\n}\r\n\r\n.display-mode__settings-btn:active {\r\n  transform: scale(0.95) rotate(90deg);\r\n}\r\n\r\n.display-mode__settings-btn:focus {\r\n  outline: none;\r\n  box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.5);\r\n}\r\n\r\n.display-mode__settings-btn svg {\r\n  display: block !important;\r\n  visibility: visible !important;\r\n  opacity: 1 !important;\r\n}\r\n\r\n.display-mode__settings-icon {\r\n  width: 18px !important;\r\n  height: 18px !important;\r\n  min-width: 18px;\r\n  min-height: 18px;\r\n  color: #4b5563 !important;\r\n  stroke: #4b5563 !important;\r\n  fill: none !important;\r\n  display: block !important;\r\n  flex-shrink: 0;\r\n  pointer-events: none;\r\n  vertical-align: middle;\r\n}\r\n\r\n.display-mode__city-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1rem;\r\n  max-width: 600px;\r\n  margin: 0 auto;\r\n  padding-top: 1.25rem;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .display-mode {\r\n    padding: 1rem;\r\n  }\r\n\r\n  .display-mode__settings-btn {\r\n    top: 1rem;\r\n    right: 1rem;\r\n    width: 2rem;\r\n    height: 2rem;\r\n  }\r\n\r\n  .display-mode__settings-icon {\r\n    width: 16px;\r\n    height: 16px;\r\n  }\r\n\r\n  .display-mode__city-list {\r\n    padding-top: 1rem;\r\n    gap: 0.875rem;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .display-mode {\r\n    padding: 0.75rem;\r\n  }\r\n\r\n  .display-mode__settings-btn {\r\n    top: 0.75rem;\r\n    right: 0.75rem;\r\n    width: 2rem;\r\n    height: 2rem;\r\n  }\r\n\r\n  .display-mode__city-list {\r\n    padding-top: 0.75rem;\r\n    gap: 0.75rem;\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"settings-mode\">\r\n    <!-- Header with Close Button -->\r\n    <div class=\"settings-mode__header\">\r\n      <h2 class=\"settings-mode__title\">Manage Cities</h2>\r\n      <button \r\n        class=\"settings-mode__close-btn\"\r\n        @click=\"handleCloseSettings\"\r\n        aria-label=\"Close settings\"\r\n        title=\"Close\"\r\n      >\r\n        <svg \r\n          class=\"settings-mode__close-icon\" \r\n          viewBox=\"0 0 24 24\" \r\n          fill=\"none\" \r\n          stroke=\"#e74c3c\" \r\n          stroke-width=\"2\"\r\n          style=\"width: 24px; height: 24px; display: block;\"\r\n        >\r\n          <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\r\n          <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\r\n        </svg>\r\n      </button>\r\n    </div>\r\n\r\n    <!-- Add City Input -->\r\n    <div class=\"settings-mode__add-city\">\r\n      <input\r\n        v-model=\"newCityName\"\r\n        type=\"text\"\r\n        class=\"settings-mode__input\"\r\n        placeholder=\"Enter city name...\"\r\n        @keyup.enter=\"handleAddCity\"\r\n        aria-label=\"City name\"\r\n      />\r\n      <button \r\n        class=\"settings-mode__add-btn\"\r\n        @click=\"handleAddCity\"\r\n        :disabled=\"!newCityName.trim()\"\r\n        aria-label=\"Add city\"\r\n      >\r\n        Add City\r\n      </button>\r\n    </div>\r\n\r\n    <!-- Error Message -->\r\n    <div v-if=\"errorMessage\" class=\"settings-mode__error\">\r\n      {{ errorMessage }}\r\n    </div>\r\n\r\n    <!-- City List -->\r\n    <div class=\"settings-mode__city-list\">\r\n      <div\r\n        v-for=\"(city, index) in cities\"\r\n        :key=\"city.id\"\r\n        class=\"settings-mode__city-item\"\r\n        :class=\"{ 'settings-mode__city-item--dragging': draggedIndex === Number(index) }\"\r\n        draggable=\"true\"\r\n        @dragstart=\"handleDragStart(index, $event)\"\r\n        @dragover=\"handleDragOver(index, $event)\"\r\n        @dragend=\"handleDragEnd\"\r\n        @drop=\"handleDrop(index, $event)\"\r\n      >\r\n        <!-- Drag Handle -->\r\n        <div class=\"settings-mode__drag-handle\" aria-label=\"Drag to reorder\">\r\n          <svg \r\n            class=\"settings-mode__drag-icon\" \r\n            viewBox=\"0 0 24 24\" \r\n            fill=\"#6b7280\"\r\n            style=\"width: 20px; height: 20px; display: block;\"\r\n          >\r\n            <circle cx=\"9\" cy=\"5\" r=\"1.5\"></circle>\r\n            <circle cx=\"9\" cy=\"12\" r=\"1.5\"></circle>\r\n            <circle cx=\"9\" cy=\"19\" r=\"1.5\"></circle>\r\n            <circle cx=\"15\" cy=\"5\" r=\"1.5\"></circle>\r\n            <circle cx=\"15\" cy=\"12\" r=\"1.5\"></circle>\r\n            <circle cx=\"15\" cy=\"19\" r=\"1.5\"></circle>\r\n          </svg>\r\n        </div>\r\n\r\n        <!-- City Info -->\r\n        <div class=\"settings-mode__city-info\">\r\n          <span class=\"settings-mode__city-name\">{{ city.name }}</span>\r\n          <span class=\"settings-mode__city-country\">{{ city.country }}</span>\r\n        </div>\r\n\r\n        <!-- Delete Button -->\r\n        <button\r\n          class=\"settings-mode__delete-btn\"\r\n          @click=\"handleRemoveCity(city.id)\"\r\n          :disabled=\"cities.length === 1\"\r\n          :aria-label=\"`Delete ${city.name}`\"\r\n          :title=\"cities.length === 1 ? 'Cannot delete the last city' : `Delete ${city.name}`\"\r\n        >\r\n          <svg \r\n            class=\"settings-mode__delete-icon\" \r\n            viewBox=\"0 0 24 24\" \r\n            fill=\"none\" \r\n            stroke=\"#e74c3c\" \r\n            stroke-width=\"2\"\r\n            style=\"width: 20px; height: 20px; display: block;\"\r\n          >\r\n            <polyline points=\"3 6 5 6 21 6\"></polyline>\r\n            <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"></path>\r\n            <line x1=\"10\" y1=\"11\" x2=\"10\" y2=\"17\"></line>\r\n            <line x1=\"14\" y1=\"11\" x2=\"14\" y2=\"17\"></line>\r\n          </svg>\r\n        </button>\r\n      </div>\r\n\r\n      <!-- Empty State -->\r\n      <div v-if=\"cities.length === 0\" class=\"settings-mode__empty\">\r\n        No cities added yet. Add a city above to get started.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref } from 'vue';\r\nimport type { SettingsModeProps } from '../types/props';\r\nimport type { City } from '../types/models';\r\n\r\nconst props = defineProps<SettingsModeProps>();\r\n\r\nconst emit = defineEmits<{\r\n  'close-settings': [];\r\n  'add-city': [cityName: string];\r\n  'remove-city': [cityId: string];\r\n  'reorder-cities': [newOrder: City[]];\r\n}>();\r\n\r\n// State\r\nconst newCityName = ref('');\r\nconst errorMessage = ref('');\r\nconst draggedIndex = ref<number | null>(null);\r\nconst dragOverIndex = ref<number | null>(null);\r\n\r\n/**\r\n * Validate city name\r\n */\r\nfunction validateCityName(cityName: string): { valid: boolean; error?: string } {\r\n  const trimmedName = cityName.trim();\r\n\r\n  // Check for empty name\r\n  if (!trimmedName) {\r\n    return { valid: false, error: 'City name cannot be empty' };\r\n  }\r\n\r\n  // Check for duplicate cities (case-insensitive comparison)\r\n  const isDuplicate = props.cities.some(\r\n    (city: City) => city.name.toLowerCase() === trimmedName.toLowerCase()\r\n  );\r\n\r\n  if (isDuplicate) {\r\n    return { valid: false, error: 'This city is already in your list' };\r\n  }\r\n\r\n  return { valid: true };\r\n}\r\n\r\n/**\r\n * Handle add city button click\r\n */\r\nfunction handleAddCity(): void {\r\n  const trimmedName = newCityName.value.trim();\r\n  \r\n  // Clear previous error\r\n  errorMessage.value = '';\r\n\r\n  // Validate city name\r\n  const validation = validateCityName(trimmedName);\r\n  \r\n  if (!validation.valid) {\r\n    errorMessage.value = validation.error || 'Invalid city name';\r\n    return;\r\n  }\r\n\r\n  // Emit add-city event\r\n  emit('add-city', trimmedName);\r\n\r\n  // Clear input field\r\n  newCityName.value = '';\r\n}\r\n\r\n/**\r\n * Handle close settings button click\r\n */\r\nfunction handleCloseSettings(): void {\r\n  emit('close-settings');\r\n}\r\n\r\n/**\r\n * Handle remove city button click\r\n */\r\nfunction handleRemoveCity(cityId: string): void {\r\n  // Don't allow removing the last city\r\n  if (props.cities.length === 1) {\r\n    return;\r\n  }\r\n\r\n  emit('remove-city', cityId);\r\n}\r\n\r\n/**\r\n * Handle drag start\r\n */\r\nfunction handleDragStart(index: number | string, event: DragEvent): void {\r\n  const idx = typeof index === 'string' ? parseInt(index, 10) : Number(index);\r\n  draggedIndex.value = idx;\r\n  \r\n  if (event.dataTransfer) {\r\n    event.dataTransfer.effectAllowed = 'move';\r\n    // Set a dummy value to enable drag\r\n    event.dataTransfer.setData('text/plain', '');\r\n  }\r\n}\r\n\r\n/**\r\n * Handle drag over\r\n */\r\nfunction handleDragOver(index: number | string, event: DragEvent): void {\r\n  event.preventDefault();\r\n  \r\n  if (event.dataTransfer) {\r\n    event.dataTransfer.dropEffect = 'move';\r\n  }\r\n\r\n  // Convert index to number (Vue may pass it as string from template)\r\n  const idx = typeof index === 'string' ? parseInt(index, 10) : Number(index);\r\n  dragOverIndex.value = idx;\r\n}\r\n\r\n/**\r\n * Handle drop\r\n */\r\nfunction handleDrop(dropIndex: number | string, event?: DragEvent): void {\r\n  event?.preventDefault();\r\n  \r\n  // Early return if no dragged item\r\n  if (draggedIndex.value === null) {\r\n    return;\r\n  }\r\n  \r\n  const dropIdx: number = typeof dropIndex === 'string' ? parseInt(dropIndex, 10) : Number(dropIndex);\r\n  const draggedIdx: number = draggedIndex.value as number;\r\n  \r\n  // Don't do anything if dropping in the same position\r\n  // Use Number() to ensure both are numbers for comparison\r\n  if (Number(draggedIdx) === Number(dropIdx)) {\r\n    return;\r\n  }\r\n\r\n  // Create a new array with reordered cities\r\n  const newOrder = [...props.cities];\r\n  const draggedCity = newOrder[Number(draggedIdx)];\r\n  \r\n  // Remove from old position\r\n  newOrder.splice(Number(draggedIdx), 1);\r\n  \r\n  // Insert at new position\r\n  newOrder.splice(Number(dropIdx), 0, draggedCity);\r\n\r\n  // Emit reorder event\r\n  emit('reorder-cities', newOrder);\r\n}\r\n\r\n/**\r\n * Handle drag end\r\n */\r\nfunction handleDragEnd(): void {\r\n  draggedIndex.value = null;\r\n  dragOverIndex.value = null;\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.settings-mode {\r\n  width: 100%;\r\n  padding: 1.25rem;\r\n  min-height: 400px;\r\n  background: #f9fafb;\r\n}\r\n\r\n.settings-mode__header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.settings-mode__title {\r\n  font-size: 1.5rem;\r\n  font-weight: 600;\r\n  color: #111827;\r\n  margin: 0;\r\n  line-height: 1.2;\r\n  letter-spacing: -0.01em;\r\n}\r\n\r\n.settings-mode__close-btn {\r\n  width: 2.25rem;\r\n  height: 2.25rem;\r\n  border: none;\r\n  background: #ffffff;\r\n  border-radius: 0.5rem;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\r\n  transition: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);\r\n}\r\n\r\n.settings-mode__close-btn:hover {\r\n  background: #fee2e2;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.settings-mode__close-btn:active {\r\n  transform: scale(0.95);\r\n}\r\n\r\n.settings-mode__close-btn:focus {\r\n  outline: none;\r\n  box-shadow: 0 0 0 2px rgba(239, 68, 68, 0.5);\r\n}\r\n\r\n.settings-mode__close-icon {\r\n  @apply w-6 h-6;\r\n  color: #e74c3c !important;\r\n  stroke: #e74c3c !important;\r\n  fill: none !important;\r\n  display: block;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.settings-mode__add-city {\r\n  display: flex;\r\n  gap: 0.75rem;\r\n  margin-bottom: 1rem;\r\n  max-width: 600px;\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n}\r\n\r\n.settings-mode__input {\r\n  flex: 1;\r\n  padding: 0.625rem 0.875rem;\r\n  border: 1px solid #d1d5db;\r\n  border-radius: 0.5rem;\r\n  font-size: 0.9375rem;\r\n  transition: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);\r\n  background: #ffffff;\r\n  color: #111827;\r\n}\r\n\r\n.settings-mode__input::placeholder {\r\n  color: #9ca3af;\r\n}\r\n\r\n.settings-mode__input:focus {\r\n  outline: none;\r\n  border-color: #3b82f6;\r\n  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\r\n}\r\n\r\n.settings-mode__add-btn {\r\n  padding: 0.625rem 1.25rem;\r\n  background: #3b82f6;\r\n  color: #ffffff;\r\n  border: none;\r\n  border-radius: 0.5rem;\r\n  font-size: 0.9375rem;\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n  transition: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);\r\n  white-space: nowrap;\r\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.settings-mode__add-btn:hover:not(:disabled) {\r\n  background: #2563eb;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.settings-mode__add-btn:active:not(:disabled) {\r\n  transform: scale(0.98);\r\n}\r\n\r\n.settings-mode__add-btn:disabled {\r\n  background: #9ca3af;\r\n  cursor: not-allowed;\r\n  opacity: 0.6;\r\n}\r\n\r\n.settings-mode__add-btn:focus {\r\n  outline: none;\r\n  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);\r\n}\r\n\r\n.settings-mode__error {\r\n  @apply max-w-[600px] mx-auto mb-4 px-4 py-3 bg-danger-light border border-danger-border rounded-lg text-danger-text text-sm;\r\n}\r\n\r\n.settings-mode__city-list {\r\n  max-width: 600px;\r\n  margin: 0 auto;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.75rem;\r\n}\r\n\r\n.settings-mode__city-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.875rem;\r\n  padding: 1rem;\r\n  background: #ffffff;\r\n  border-radius: 0.5rem;\r\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\r\n  transition: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);\r\n  cursor: move;\r\n}\r\n\r\n.settings-mode__city-item:hover {\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n  transform: translateY(-1px);\r\n}\r\n\r\n.settings-mode__city-item--dragging {\r\n  @apply opacity-50 scale-[0.98];\r\n}\r\n\r\n.settings-mode__drag-handle {\r\n  @apply flex items-center justify-center w-6 h-6 text-gray-500 cursor-grab flex-shrink-0;\r\n  @apply active:cursor-grabbing;\r\n}\r\n\r\n.settings-mode__drag-icon {\r\n  @apply w-5 h-5;\r\n  color: #6b7280 !important;\r\n  fill: #6b7280 !important;\r\n  display: block;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.settings-mode__city-info {\r\n  @apply flex-1 flex flex-col gap-1;\r\n}\r\n\r\n.settings-mode__city-name {\r\n  font-size: 1rem;\r\n  font-weight: 500;\r\n  color: #111827;\r\n}\r\n\r\n.settings-mode__city-country {\r\n  font-size: 0.875rem;\r\n  font-weight: 400;\r\n  color: #6b7280;\r\n}\r\n\r\n.settings-mode__delete-btn {\r\n  width: 2rem;\r\n  height: 2rem;\r\n  border: none;\r\n  background: transparent;\r\n  border-radius: 0.375rem;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  transition: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);\r\n  flex-shrink: 0;\r\n}\r\n\r\n.settings-mode__delete-btn:hover:not(:disabled) {\r\n  background: #fee2e2;\r\n}\r\n\r\n.settings-mode__delete-btn:active:not(:disabled) {\r\n  transform: scale(0.95);\r\n}\r\n\r\n.settings-mode__delete-btn:disabled {\r\n  opacity: 0.3;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.settings-mode__delete-btn:focus {\r\n  outline: none;\r\n  box-shadow: 0 0 0 2px rgba(239, 68, 68, 0.3);\r\n}\r\n\r\n.settings-mode__delete-icon {\r\n  @apply w-5 h-5;\r\n  color: #e74c3c !important;\r\n  stroke: #e74c3c !important;\r\n  fill: none !important;\r\n  display: block;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.settings-mode__empty {\r\n  @apply py-10 px-5 text-center text-gray-500 text-base;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .settings-mode {\r\n    padding: 1rem;\r\n  }\r\n\r\n  .settings-mode__title {\r\n    font-size: 1.25rem;\r\n  }\r\n\r\n  .settings-mode__close-btn {\r\n    width: 2rem;\r\n    height: 2rem;\r\n  }\r\n\r\n  .settings-mode__close-icon {\r\n    width: 1rem;\r\n    height: 1rem;\r\n  }\r\n\r\n  .settings-mode__add-city {\r\n    flex-direction: column;\r\n  }\r\n\r\n  .settings-mode__add-btn {\r\n    width: 100%;\r\n  }\r\n\r\n  .settings-mode__city-item {\r\n    padding: 0.875rem;\r\n  }\r\n\r\n  .settings-mode__city-name {\r\n    font-size: 0.9375rem;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .settings-mode {\r\n    padding: 0.75rem;\r\n  }\r\n\r\n  .settings-mode__title {\r\n    font-size: 1.125rem;\r\n  }\r\n\r\n  .settings-mode__header {\r\n    margin-bottom: 1rem;\r\n  }\r\n\r\n  .settings-mode__city-item {\r\n    gap: 0.625rem;\r\n    padding: 0.75rem;\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"weather-widget\">\r\n    <ErrorBoundary @retry=\"handleErrorRetry\" @reset=\"handleErrorReset\">\r\n      <!-- Display Mode -->\r\n      <DisplayMode\r\n        v-if=\"mode === 'display'\"\r\n        :cities=\"cities\"\r\n        @open-settings=\"toggleMode\"\r\n      />\r\n\r\n      <!-- Settings Mode -->\r\n      <SettingsMode\r\n        v-else\r\n        :cities=\"cities\"\r\n        @close-settings=\"toggleMode\"\r\n        @add-city=\"addCity\"\r\n        @remove-city=\"removeCity\"\r\n        @reorder-cities=\"reorderCities\"\r\n      />\r\n    </ErrorBoundary>\r\n\r\n    <!-- Global Error Display (outside ErrorBoundary) -->\r\n    <div v-if=\"globalError\" class=\"weather-widget__error\">\r\n      {{ globalError }}\r\n      <button \r\n        v-if=\"canRetry\"\r\n        class=\"weather-widget__error-retry\"\r\n        @click=\"retryLastAction\"\r\n      >\r\n        Retry\r\n      </button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, onMounted } from 'vue';\r\nimport ErrorBoundary from './ErrorBoundary.vue';\r\nimport DisplayMode from './DisplayMode.vue';\r\nimport SettingsMode from './SettingsMode.vue';\r\nimport { storageService } from '../services/StorageService';\r\nimport { createGeolocationService } from '../services/GeolocationService';\r\nimport { createWeatherService } from '../services/WeatherService';\r\nimport { retryWithBackoff, isTransientError, getUserFriendlyMessage } from '../utils/errorHandler';\r\nimport type { City } from '../types/models';\r\n\r\n// Get API key from environment variable\r\n// Falls back to provided API key if env var is not set\r\nconst API_KEY = process.env.OPENWEATHER_API_KEY || '5ec582eefe33e199bc0245ff5a6aaa8e';\r\n\r\n// Log API key for debugging (only first few characters for security)\r\nconsole.log('[Weather Widget] API Key loaded:', API_KEY ? `${API_KEY.substring(0, 8)}...` : 'NOT SET');\r\n\r\n// Initialize services\r\nconst geolocationService = createGeolocationService(API_KEY);\r\nconst weatherService = createWeatherService(API_KEY);\r\n\r\n// State\r\nconst cities = ref<City[]>([]);\r\nconst mode = ref<'display' | 'settings'>('display');\r\nconst globalError = ref<string | null>(null);\r\nconst canRetry = ref(false);\r\nconst lastFailedAction = ref<(() => Promise<void>) | null>(null);\r\n\r\n/**\r\n * Load cities from LocalStorage\r\n */\r\nfunction loadCitiesFromStorage(): void {\r\n  try {\r\n    const savedCities = storageService.getCities();\r\n    cities.value = savedCities;\r\n  } catch (error) {\r\n    console.error('Error loading cities from storage:', error);\r\n    globalError.value = 'Failed to load saved cities';\r\n  }\r\n}\r\n\r\n/**\r\n * Save cities to LocalStorage\r\n */\r\nfunction saveCitiesToStorage(): void {\r\n  try {\r\n    storageService.saveCities(cities.value);\r\n  } catch (error) {\r\n    console.error('Error saving cities to storage:', error);\r\n    globalError.value = 'Failed to save cities. Your changes may not persist.';\r\n  }\r\n}\r\n\r\n/**\r\n * Retry the last failed action\r\n */\r\nasync function retryLastAction(): Promise<void> {\r\n  if (lastFailedAction.value) {\r\n    globalError.value = null;\r\n    canRetry.value = false;\r\n    \r\n    try {\r\n      await lastFailedAction.value();\r\n      lastFailedAction.value = null;\r\n    } catch (error) {\r\n      // Error will be handled by the action itself\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Handle error boundary retry\r\n */\r\nfunction handleErrorRetry(): void {\r\n  // Reload the widget\r\n  window.location.reload();\r\n}\r\n\r\n/**\r\n * Handle error boundary reset\r\n */\r\nfunction handleErrorReset(): void {\r\n  // Clear all data and reset to initial state\r\n  try {\r\n    storageService.clearCities();\r\n    cities.value = [];\r\n    mode.value = 'settings';\r\n    globalError.value = null;\r\n    canRetry.value = false;\r\n    lastFailedAction.value = null;\r\n  } catch (error) {\r\n    console.error('Error resetting widget:', error);\r\n  }\r\n}\r\n\r\n/**\r\n * Initialize with geolocation if no saved cities exist\r\n */\r\nasync function initializeWithGeolocation(): Promise<void> {\r\n  const action = async () => {\r\n    // Get user's current position\r\n    const coordinates = await geolocationService.getCurrentPosition();\r\n    \r\n    // Get city name from coordinates\r\n    const cityName = await geolocationService.getCityFromCoordinates(\r\n      coordinates.lat,\r\n      coordinates.lon\r\n    );\r\n    \r\n    // Fetch weather data to get full city information\r\n    const weatherData = await weatherService.getWeatherByCoordinates(\r\n      coordinates.lat,\r\n      coordinates.lon\r\n    );\r\n    \r\n    // Extract city name and country from the city name string\r\n    // Format is typically \"CityName, CountryCode\"\r\n    const [name, country] = cityName.split(',').map(s => s.trim());\r\n    \r\n    // Create city object\r\n    const city: City = {\r\n      id: `${name}-${country}-${Date.now()}`,\r\n      name: name || cityName,\r\n      country: country || 'Unknown',\r\n      coordinates: {\r\n        lat: coordinates.lat,\r\n        lon: coordinates.lon\r\n      },\r\n      addedAt: Date.now()\r\n    };\r\n    \r\n    // Add city to list\r\n    cities.value = [city];\r\n    \r\n    // Save to storage\r\n    saveCitiesToStorage();\r\n  };\r\n\r\n  try {\r\n    // Use retry mechanism for transient errors\r\n    await retryWithBackoff(action, {\r\n      maxAttempts: 2,\r\n      delayMs: 1000,\r\n      onRetry: (attempt, error) => {\r\n        console.log(`Retrying geolocation (attempt ${attempt}):`, error.message);\r\n      },\r\n    });\r\n  } catch (error) {\r\n    console.error('Geolocation initialization failed:', error);\r\n    \r\n    const err = error instanceof Error ? error : new Error(String(error));\r\n    \r\n    // Store action for retry if it's a transient error\r\n    if (isTransientError(err)) {\r\n      lastFailedAction.value = action;\r\n      canRetry.value = true;\r\n    }\r\n    \r\n    // Get user-friendly message\r\n    globalError.value = getUserFriendlyMessage(err);\r\n    \r\n    // Switch to settings mode so user can add cities manually\r\n    mode.value = 'settings';\r\n  }\r\n}\r\n\r\n/**\r\n * Toggle between display and settings modes\r\n */\r\nfunction toggleMode(): void {\r\n  mode.value = mode.value === 'display' ? 'settings' : 'display';\r\n  \r\n  // Clear global error when switching modes\r\n  globalError.value = null;\r\n}\r\n\r\n/**\r\n * Add a new city to the list\r\n * Validates the city with the API before adding\r\n */\r\nasync function addCity(cityName: string): Promise<void> {\r\n  const action = async () => {\r\n    // Validate city by fetching its weather data\r\n    const weatherData = await weatherService.getWeatherByCity(cityName);\r\n    \r\n    // Check for duplicates (case-insensitive)\r\n    const isDuplicate = cities.value.some(\r\n      city => city.name.toLowerCase() === cityName.toLowerCase()\r\n    );\r\n    \r\n    if (isDuplicate) {\r\n      globalError.value = 'This city is already in your list';\r\n      return;\r\n    }\r\n    \r\n    // Fetch full city data to get coordinates\r\n    const url = `https://api.openweathermap.org/data/2.5/weather?q=${encodeURIComponent(cityName)}&appid=${API_KEY}`;\r\n    const response = await fetch(url);\r\n    const data = await response.json();\r\n    \r\n    // Create city object\r\n    const city: City = {\r\n      id: `${data.name}-${data.sys.country}-${Date.now()}`,\r\n      name: data.name,\r\n      country: data.sys.country,\r\n      coordinates: {\r\n        lat: data.coord.lat,\r\n        lon: data.coord.lon\r\n      },\r\n      addedAt: Date.now()\r\n    };\r\n    \r\n    // Add city to list\r\n    cities.value.push(city);\r\n    \r\n    // Save to storage\r\n    saveCitiesToStorage();\r\n  };\r\n\r\n  try {\r\n    // Clear previous errors\r\n    globalError.value = null;\r\n    canRetry.value = false;\r\n    \r\n    // Use retry mechanism for transient errors\r\n    await retryWithBackoff(action, {\r\n      maxAttempts: 3,\r\n      delayMs: 1000,\r\n      backoffMultiplier: 2,\r\n      onRetry: (attempt, error) => {\r\n        console.log(`Retrying add city (attempt ${attempt}):`, error.message);\r\n      },\r\n    });\r\n  } catch (error) {\r\n    console.error('Error adding city:', error);\r\n    \r\n    const err = error instanceof Error ? error : new Error(String(error));\r\n    \r\n    // Store action for retry if it's a transient error\r\n    if (isTransientError(err)) {\r\n      lastFailedAction.value = () => addCity(cityName);\r\n      canRetry.value = true;\r\n    }\r\n    \r\n    // Get user-friendly message\r\n    const friendlyMessage = getUserFriendlyMessage(err);\r\n    console.log('[Weather Widget] Setting error message:', friendlyMessage);\r\n    globalError.value = friendlyMessage;\r\n  }\r\n}\r\n\r\n/**\r\n * Remove a city from the list\r\n * Prevents removing the last city\r\n */\r\nfunction removeCity(cityId: string): void {\r\n  // Protect against removing the last city\r\n  if (cities.value.length === 1) {\r\n    globalError.value = 'Cannot remove the last city';\r\n    return;\r\n  }\r\n  \r\n  // Clear previous errors\r\n  globalError.value = null;\r\n  \r\n  // Remove city from list\r\n  cities.value = cities.value.filter(city => city.id !== cityId);\r\n  \r\n  // Save to storage\r\n  saveCitiesToStorage();\r\n}\r\n\r\n/**\r\n * Reorder cities based on drag-and-drop\r\n */\r\nfunction reorderCities(newOrder: City[]): void {\r\n  // Clear previous errors\r\n  globalError.value = null;\r\n  \r\n  // Update cities array\r\n  cities.value = newOrder;\r\n  \r\n  // Save to storage\r\n  saveCitiesToStorage();\r\n}\r\n\r\n// Lifecycle hooks\r\nonMounted(async () => {\r\n  // Load cities from storage\r\n  loadCitiesFromStorage();\r\n  \r\n  // If no saved cities, initialize with geolocation\r\n  if (cities.value.length === 0) {\r\n    await initializeWithGeolocation();\r\n  }\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.weather-widget {\r\n  position: relative;\r\n  width: 100%;\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n}\r\n\r\n.weather-widget__error {\r\n  @apply fixed bottom-5 left-1/2 -translate-x-1/2 max-w-[90%] px-6 py-4 bg-danger-light border border-danger-border rounded-lg text-danger-text text-sm shadow-lg z-[1000] flex items-center gap-3;\r\n  animation: slideUp 0.3s ease;\r\n}\r\n\r\n.weather-widget__error-retry {\r\n  @apply px-3 py-1.5 bg-danger text-white border-none rounded font-medium text-[13px] cursor-pointer transition-all duration-200 whitespace-nowrap hover:bg-[#c0392b] active:scale-95;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .weather-widget__error {\r\n    @apply bottom-4 px-5 py-3 text-[13px];\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .weather-widget__error {\r\n    @apply bottom-3 px-4 py-2.5 text-xs max-w-[95%];\r\n  }\r\n}\r\n</style>\r\n"],"names":[],"ignoreList":[],"sourceRoot":""}